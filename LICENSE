# ğŸ”¥ Blogs API

A minimal and opinionated blogging API built with FastAPI. It supports user registration, authentication (cookie-based JWT), creating/updating/deleting blogs, comments, and likes. The API returns consistent JSON responses via a custom response helper.

**ğŸ“š [Complete API Documentation (Postman)](https://documenter.getpostman.com/view/34879207/2sB3WmV45e)** â­

---

## âš¡ Overview

This project is a simple Blogs API implemented using FastAPI. It provides endpoints for:
- User signup, login (cookie-based JWT), and logout
- CRUD for blog posts (create, read, update, delete)
- Adding, updating, and deleting comments on blogs
- Liking/unliking blogs (toggle)
- User profile operations (view, update, change password) and retrieving user's blogs/comments/likes

The API is designed for learning and small projects. It uses SQLAlchemy for ORM models and Pydantic (via schemas) for validation.

---

## ğŸš€ Tech Stack

- **FastAPI** â€” Modern, fast web framework for building APIs
- **Uvicorn** â€” Lightning-fast ASGI server
- **SQLAlchemy** â€” Powerful ORM for database operations
- **Pydantic** â€” Data validation and serialization
- **python-dotenv** â€” Environment variable management
- **passlib[bcrypt]** â€” Secure password hashing
- **python-jose** â€” JWT token handling

---

## âœ¨ Features

- âœ… User registration/login using hashed passwords (bcrypt)
- âœ… JWT-based authentication (stored in `accessToken` cookie)
- âœ… CRUD operations for blogs with ownership checks
- âœ… Comment creation, update, delete with ownership validation
- âœ… Toggle-like functionality for blogs
- âœ… Consistent JSON response wrapper via `utils/response.py`
- âœ… Input/output validation using Pydantic schemas
- âœ… Automatic API documentation (Swagger UI & ReDoc)
- âœ… Database-agnostic design (works with SQLite, PostgreSQL, MySQL, etc.)

---

## ğŸ§­ Quick Start

> These instructions assume you're on Windows (PowerShell). Adjust activation commands for other shells or platforms.

### 1. Clone the repository

```powershell
git clone <your-repo-url>
cd "Blogs Api"
```

### 2. Create and activate virtual environment

```powershell
python -m venv .venv

# PowerShell activation
.\.venv\Scripts\Activate.ps1

# On macOS/Linux, use:
# source .venv/bin/activate
```

### 3. Install dependencies

```powershell
pip install fastapi uvicorn sqlalchemy python-dotenv passlib[bcrypt] python-jose
```

*Tip: For production, create a `requirements.txt` file with pinned versions.*

### 4. Configure environment variables

Create a `.env` file in the project root:

```env
DB_URL=sqlite:///./test.db
SECRETE_KEY=your_secret_key_here_generate_a_strong_random_key
ALGORITHM=HS256
```

**Notes:**
- `DB_URL` â€” Database connection string (SQLite example shown, supports PostgreSQL, MySQL, etc.)
- `SECRETE_KEY` â€” Generate a strong random key for JWT signing
- `ALGORITHM` â€” JWT algorithm (HS256 recommended)

### 5. Run the server

```powershell
uvicorn main:app --reload --port 8000
```

ğŸ‰ **Success!** Your API is now running at:
- **Swagger UI:** http://127.0.0.1:8000/docs
- **ReDoc:** http://127.0.0.1:8000/redoc

---

## ğŸ§© API Endpoints

All responses use a `CustomResponse` wrapper:

**Success Response:**
```json
{
  "status": "success",
  "message": "...",
  "data": { ... }
}
```

**Error Response:**
```json
{
  "status": "error",
  "message": "..."
}
```

### ğŸ”‘ Authentication (`/auth`)

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| POST | `/auth/register` | Register a new user | âŒ |
| POST | `/auth/login` | Login and receive JWT cookie | âŒ |
| GET | `/auth/logout` | Logout and clear cookie | âœ… |

### ğŸ‘¤ User (`/user`)

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| GET | `/user/me` | Get current user profile | âœ… |
| PUT | `/user/me/update` | Update profile information | âœ… |
| PUT | `/user/me/changepass` | Change password | âœ… |
| GET | `/user/me/comments` | Get blogs user commented on | âœ… |
| GET | `/user/me/likes` | Get blogs user liked | âœ… |
| GET | `/user/me/blogs` | Get user's blog posts | âœ… |

### ğŸ“ Blog (`/blog`)

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| GET | `/blog/` | Get all blogs | âŒ |
| POST | `/blog/` | Create a new blog | âœ… |
| GET | `/blog/{id}` | Get blog with comments & likes | âŒ |
| PUT | `/blog/{id}` | Update blog (owner only) | âœ… |
| DELETE | `/blog/{id}` | Delete blog (owner only) | âœ… |

### ğŸ’¬ Comment (`/comment`)

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| POST | `/comment/{blog_id}` | Add comment to blog | âœ… |
| PUT | `/comment/{comment_id}` | Update comment (owner only) | âœ… |
| DELETE | `/comment/{comment_id}` | Delete comment (owner only) | âœ… |

### ğŸ‘ Like (`/like`)

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| GET | `/like/toggle/{id}` | Toggle like on blog | âœ… |

---

## ğŸ’¡ Example Usage

### Register a User

**Request:** `POST /auth/register`

```json
{
  "fullName": "Jane Doe",
  "email": "jane@example.com",
  "password": "Password123!",
  "username": "jane_doe"
}
```

**Response:** `201 Created`

```json
{
  "status": "success",
  "message": "User Registered Successfully!",
  "data": {
    "username": "jane_doe",
    "email": "jane@example.com",
    "Full Name": "Jane Doe"
  }
}
```

### Login

**Request:** `POST /auth/login`

```json
{
  "username": "jane_doe",
  "password": "Password123!"
}
```

**Response:** `200 OK` (sets `accessToken` cookie)

```json
{
  "status": "success",
  "message": "Login Successful!",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

### Create a Blog Post

**Request:** `POST /blog/` (with auth cookie)

```json
{
  "title": "My First Blog Post",
  "content": "This is the content of my first blog post..."
}
```

**Response:** `201 Created`

```json
{
  "status": "success",
  "message": "Blog Created Successfully!",
  "data": {
    "id": 1,
    "title": "My First Blog Post",
    "content": "This is the content of my first blog post...",
    "created_at": "2025-10-29T10:30:00",
    "updated_at": "2025-10-29T10:30:00"
  }
}
```

---

## ğŸ“ Project Structure

```
ğŸ“¦ Blogs Api/
â”œâ”€ ğŸ“„ main.py                    # FastAPI app & router registration
â”œâ”€ ğŸ“ Auth/                      # Authentication helpers
â”‚  â””â”€ auth.py                    # Password hashing & JWT functions
â”œâ”€ ğŸ“ Controllers/               # Business logic layer
â”‚  â”œâ”€ auth_controllers.py
â”‚  â”œâ”€ blog_controllers.py
â”‚  â”œâ”€ comment_controllers.py
â”‚  â”œâ”€ like_controllers.py
â”‚  â””â”€ user_controllers.py
â”œâ”€ ğŸ“ DataBase/                  # Database configuration
â”‚  â””â”€ connect.py                 # DB connection & session factory
â”œâ”€ ğŸ“ Midddlewares/              # Request middlewares
â”‚  â””â”€ auth_middleware.py         # JWT verification middleware
â”œâ”€ ğŸ“ Models/                    # Database models
â”‚  â””â”€ sql_models.py              # SQLAlchemy ORM models
â”œâ”€ ğŸ“ Routes/                    # API route definitions
â”‚  â”œâ”€ auth_routes.py
â”‚  â”œâ”€ blog_routes.py
â”‚  â”œâ”€ comment_routes.py
â”‚  â”œâ”€ like_routes.py
â”‚  â””â”€ user_routes.py
â”œâ”€ ğŸ“ Schemas/                   # Request/response schemas
â”‚  â”œâ”€ blog_schemas.py
â”‚  â”œâ”€ comment_schemas.py
â”‚  â”œâ”€ like_schemas.py
â”‚  â””â”€ user_schemas.py
â””â”€ ğŸ“ utils/                     # Utility functions
   â”œâ”€ imports.py                 # Environment variables loader
   â””â”€ response.py                # Custom response wrapper
```

---

## ğŸ”’ Security Considerations

- Passwords are hashed using bcrypt before storage
- JWT tokens are stored in HTTP-only cookies
- All authenticated endpoints verify token validity
- Ownership checks prevent unauthorized modifications
- Input validation via Pydantic schemas

---

## ğŸš€ Deployment

For production deployment:

1. Use a production-grade database (PostgreSQL recommended)
2. Set strong `SECRETE_KEY` environment variable
3. Use a production ASGI server like Gunicorn with Uvicorn workers
4. Enable HTTPS/TLS
5. Configure CORS appropriately
6. Set up proper logging and monitoring

---

## ğŸ“ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ‘¨â€ğŸ’» Contact

**Developer:** Viraj Gavade

- **ğŸ“š API Documentation: [Postman Collection](https://documenter.getpostman.com/view/34879207/2sB3WmV45e)** â­
- ğŸ“§ Email: vrajgavade17@gmail.com
- ğŸ’¼ LinkedIn: [linkedin.com/in/viraj-gavade-dev](https://www.linkedin.com/in/viraj-gavade-dev/)
- ğŸ™ GitHub: [viraj-gavade](https://github.com/viraj-gavade)
- ğŸŒ Portfolio: [viraj-forge](https://viraj-forge.vercel.app/)

---

## ğŸ¤ Contributing

Contributions, issues, and feature requests are welcome! Feel free to check the issues page.

---

## â­ Show Your Support

If this project helped you, please give it a â­ï¸!

---

**Built withFastAPI** ğŸš€